<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="logbus-core" type="It.Unina.Dis.Logbus.Configuration.LogbusCoreConfigurationSectionHandler, It.Unina.Dis.Logbus, Culture=neutral, PublicKeyToken=9bbc6deeaedcd38f" />
    <section name="logbus-client" type="It.Unina.Dis.Logbus.Configuration.LogbusClientConfigurationSectionHandler, It.Unina.Dis.Logbus, Culture=neutral, PublicKeyToken=9bbc6deeaedcd38f" />
    <section name="logbus-logger" type="It.Unina.Dis.Logbus.Configuration.LogbusLoggerConfigurationSectionHandler, It.Unina.Dis.Logbus, Culture=neutral, PublicKeyToken=9bbc6deeaedcd38f" />
    <section name="logbus-entityplugin" type="It.Unina.Dis.Logbus.Entities.Configuration.EntityPluginConfigurationSectionHandler, It.Unina.Dis.Logbus.Extensions, Culture=neutral, PublicKeyToken=9bbc6deeaedcd38f" />
  </configSections>

  <logbus-core xmlns="http://www.dis.unina.it/logbus-ng/configuration/2.0"
               xmlns:filter="http://www.dis.unina.it/logbus-ng/filters"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema"
               xmlns:config="http://www.dis.unina.it/logbus-ng/configuration/2.0"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <in-channels>
      <in-channel config:type="SyslogUdpReceiver">
        <param config:name="receiveBufferSize" config:value="1048576"/>
      </in-channel>
      <in-channel config:type="SyslogUdpReceiver">
        <param config:name="port" config:value="7514"/>
        <param config:name="receiveBufferSize" config:value="1048576"/>
      </in-channel>
      <in-channel config:type="SyslogTlsReceiver">
        <!--<param config:name="certificate" config:value="logbus.p12"/>-->
      </in-channel>
    </in-channels>
    <plugins>
      <plugin config:type="It.Unina.Dis.Logbus.Entities.EntityPlugin, It.Unina.Dis.Logbus.Extensions, Culture=neutral, PublicKeyToken=9bbc6deeaedcd38f"/>
    </plugins>
    <forward-to>
      <forwarder config:type="FileCollector">
        <param config:name="filePath" config:value="output.log"/>
      </forwarder>
    </forward-to>
  </logbus-core>
  <logbus-entityplugin xmlns="http://www.dis.unina.it/logbus-ng/entities">
    <entity-key>
      <field>host</field>
      <field>logger</field>
    </entity-key>
  </logbus-entityplugin>
  <logbus-logger xmlns="http://www.dis.unina.it/logbus-ng/configuration/2.0"
               xmlns:filter="http://www.dis.unina.it/logbus-ng/filters"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema"
               xmlns:config="http://www.dis.unina.it/logbus-ng/configuration/2.0"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               default-collector="console">
    <collector id="console" config:type="ConsoleCollector"/>
    <logger collector-id="console" config:name="Logbus"/>
  </logbus-logger>
</configuration>